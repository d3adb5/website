<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Programming on d3adb5's personal website</title><link>https://d3adb5.net/tags/programming/</link><description>Recent content in Programming on d3adb5's personal website</description><generator>Hugo</generator><language>en</language><lastBuildDate>Thu, 02 Nov 2023 18:34:20 -0700</lastBuildDate><atom:link href="https://d3adb5.net/tags/programming/index.xml" rel="self" type="application/rss+xml"/><item><title>Why are Ruby blocks constructed like this?</title><link>https://d3adb5.net/blog/somebody-please-explain-vagrant-ruby/</link><pubDate>Wed, 01 Nov 2023 00:00:00 +0000</pubDate><guid>https://d3adb5.net/blog/somebody-please-explain-vagrant-ruby/</guid><description>&lt;p&gt;I took up a position with a new company that involves the use of SaltStack.
Since I&amp;rsquo;d never used it before, I decided to try my hand at setting up a proof
of concept, and for that I wanted to use multiple machines. So I decided to use
Vagrant, another tool I&amp;rsquo;m not familiar with, to declaratively spin up a few
VMs.&lt;/p&gt;
&lt;p&gt;This is what I first tried:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-ruby" data-lang="ruby"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;machines &lt;span style="color:#f92672"&gt;=&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;master&lt;/span&gt;: { &lt;span style="color:#e6db74"&gt;box&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;bento/ubuntu-22.04&amp;#34;&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;master&lt;/span&gt;: &lt;span style="color:#66d9ef"&gt;true&lt;/span&gt; },
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;superior&lt;/span&gt;: { &lt;span style="color:#e6db74"&gt;box&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;bento/ubuntu-22.04&amp;#34;&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;master&lt;/span&gt;: &lt;span style="color:#66d9ef"&gt;false&lt;/span&gt; },
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;michigan&lt;/span&gt;: { &lt;span style="color:#e6db74"&gt;box&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;bento/ubuntu-22.04&amp;#34;&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;master&lt;/span&gt;: &lt;span style="color:#66d9ef"&gt;false&lt;/span&gt; },
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;ontario&lt;/span&gt;: { &lt;span style="color:#e6db74"&gt;box&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;bento/ubuntu-22.04&amp;#34;&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;master&lt;/span&gt;: &lt;span style="color:#66d9ef"&gt;false&lt;/span&gt; },
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;erie&lt;/span&gt;: { &lt;span style="color:#e6db74"&gt;box&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;bento/ubuntu-22.04&amp;#34;&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;master&lt;/span&gt;: &lt;span style="color:#66d9ef"&gt;false&lt;/span&gt; },
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;huron&lt;/span&gt;: { &lt;span style="color:#e6db74"&gt;box&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;bento/ubuntu-22.04&amp;#34;&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;master&lt;/span&gt;: &lt;span style="color:#66d9ef"&gt;false&lt;/span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;Vagrant&lt;/span&gt;&lt;span style="color:#f92672"&gt;.&lt;/span&gt;configure(&lt;span style="color:#e6db74"&gt;&amp;#34;2&amp;#34;&lt;/span&gt;) &lt;span style="color:#66d9ef"&gt;do&lt;/span&gt; &lt;span style="color:#f92672"&gt;|&lt;/span&gt;config&lt;span style="color:#f92672"&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;for&lt;/span&gt; hostname, options &lt;span style="color:#66d9ef"&gt;in&lt;/span&gt; machines
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; config&lt;span style="color:#f92672"&gt;.&lt;/span&gt;vm&lt;span style="color:#f92672"&gt;.&lt;/span&gt;define hostname &lt;span style="color:#66d9ef"&gt;do&lt;/span&gt; &lt;span style="color:#f92672"&gt;|&lt;/span&gt;machine&lt;span style="color:#f92672"&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; machine&lt;span style="color:#f92672"&gt;.&lt;/span&gt;vm&lt;span style="color:#f92672"&gt;.&lt;/span&gt;box &lt;span style="color:#f92672"&gt;=&lt;/span&gt; options&lt;span style="color:#f92672"&gt;[&lt;/span&gt;&lt;span style="color:#e6db74"&gt;:box&lt;/span&gt;&lt;span style="color:#f92672"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; machine&lt;span style="color:#f92672"&gt;.&lt;/span&gt;vm&lt;span style="color:#f92672"&gt;.&lt;/span&gt;hostname &lt;span style="color:#f92672"&gt;=&lt;/span&gt; hostname
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; machine&lt;span style="color:#f92672"&gt;.&lt;/span&gt;vm&lt;span style="color:#f92672"&gt;.&lt;/span&gt;network &lt;span style="color:#e6db74"&gt;&amp;#34;private_network&amp;#34;&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;type&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;dhcp&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; machine&lt;span style="color:#f92672"&gt;.&lt;/span&gt;vm&lt;span style="color:#f92672"&gt;.&lt;/span&gt;provision &lt;span style="color:#e6db74"&gt;:salt&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;install_master&lt;/span&gt;: options&lt;span style="color:#f92672"&gt;[&lt;/span&gt;&lt;span style="color:#e6db74"&gt;:master&lt;/span&gt;&lt;span style="color:#f92672"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;end&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;end&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;end&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;This magically worked, or so I thought, until many failed attempts at
automatically settings up DNS resolution for the machine&amp;rsquo;s friendly names. I
noticed that the hostnames of my machines were sometimes all &lt;code&gt;huron&lt;/code&gt; or all
&lt;code&gt;michigan&lt;/code&gt; or something other than &lt;code&gt;master&lt;/code&gt;, even though the name of the
machine on the Vagrant side was correct. Then it dawned on me: &lt;em&gt;it&amp;rsquo;s using
whatever the last value of &lt;code&gt;options&lt;/code&gt; in the loop was!&lt;/em&gt;&lt;/p&gt;</description></item><item><title>Writing your program in C can make it slower</title><link>https://d3adb5.net/blog/c-isnt-string-friendly/</link><pubDate>Thu, 11 May 2023 00:00:00 +0000</pubDate><guid>https://d3adb5.net/blog/c-isnt-string-friendly/</guid><description>&lt;p&gt;If you asked me what I thought of programming about a decade ago, my &lt;em&gt;young,
inexperienced, zealot self&lt;/em&gt; would have likely told you everybody should be
programming in C, so that all programs could be really fast, and that
programmers who complained about the language were just too lazy to deal with
memory allocation and pointers. &lt;strong&gt;How mistaken I was!&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;I&amp;rsquo;m pretty sure I attributed every bit of slow software or transition to &lt;em&gt;lazy
Java programmers:&lt;/em&gt;&lt;/p&gt;</description></item></channel></rss>