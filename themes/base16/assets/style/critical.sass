@import '_settings'
@import '_colorscheme'
@import '_abstract'

@media screen and (min-width: $body-max-width)
  article
    border-radius: $body-border-radius
  body
    margin: 2em auto !important

html
  background: $bg-site

body
  width: $body-width
  max-width: $body-max-width
  margin: 0 auto

  line-height: 1.5em
  font-family: $common-font
  font-size: $body-font-size

  color: $fg-normal

h1, h2, h3, h4, h5, h6
  margin: 1.1em 0 .83em

h1, h2, h3
  color: $fg-header
h4, h5, h6
  color: $fg-header-alt

h1
  font-size: 1.5em
h2
  font-size: 1.26em
h3
  font-size: 1.10em
h4
  font-size: 1.03em
h5
  font-size: .67em
h6
  font-size: .51em

a
  text-decoration: initial
  color: $fg-anchor

a:hover
  text-decoration: underline

em
  color: $term-11
  font-style: normal
strong
  color: $term-09

nav#site-nav
  @extend %basic-page-navigation
  border-radius: 1em 1em 0 0
  background: $bg-navbar
  color: $fg-navbar

  a.push-right
    margin-left: auto

  a.current
    color: $fg-navbar-current

label#toc-toggle
  display: flex
  width: 100%
  margin-top: 1em
  height: 3em
  align-items: center
  justify-content: center

input#toc-toggle-box
  display: none

input#toc-toggle-box ~ nav#TableOfContents
  display: none

input#toc-toggle-box:checked ~ nav#TableOfContents
  display: block

nav#TableOfContents
  margin: 0.5em 0 0 0
  box-sizing: border-box
  background: $term-00
  padding: $common-padding
  border-radius: $toc-border-radius
  overflow: hidden
  font-weight: bold

  color: $fg-anchor

  ul
    margin: 0
    padding: 0
    list-style-type: none

    li
      overflow: hidden
      white-space: nowrap
      text-overflow: ' ...'

    li + li
      margin-top: 1em

    ul
      padding-left: 1em
      margin-top: 1em

@media screen and (min-width: $body-max-width)
  label#toc-toggle
    display: none

  input#toc-toggle-box ~ nav#TableOfContents
    display: initial

  nav#TableOfContents
    float: right
    margin: 1em 0 1em 1em
    max-width: 40%
    font-size: $toc-font-size

    ul
      li + li
        margin-top: initial
      ul
        margin-top: initial

footer#page-footer
  @extend %basic-page-extremity
  background: $bg-footer
  color: $fg-footer

  display: grid
  grid-auto-flow: column
  grid-template-columns: minmax(0, 1fr)

  a
    color: $term-11

  p#timestamp, p#commit
    margin: 0
  p#timestamp
    text-align: right

article
  background: $bg-normal
  padding: 0.1em 1.5em 0.8em 1.5em

  header
    font-weight: bold

    section.header-line
      display: flex
      justify-content: space-between
      align-items: center

      h1
        color: $fg-header
        margin-bottom: 0.25em

      aside#translations
        margin: 1.1em 0 0.25em

        ul#translations
          list-style: none
          padding: 0
          margin: 0

          display: flex
          justify-content: space-around

          font-size: 115%

          li:not(:first-child)
            margin-left: 1em

    section.subheader-line
      display: flex
      justify-content: space-between
      align-items: center
      flex-wrap: wrap

      p.subtitle
        color: $fg-header-sub
        margin: 0

        em
          color: inherit
          font-style: italic

      ul#article-tags
        list-style-type: none
        padding-left: 0
        margin: 0
        font-size: 85%

        li
          display: inline-block

          &:nth-child(n + 2)
            margin-left: 1em

          a
            color: $term-11

  blockquote
    color: $fg-blockquote
    padding-left: 1em
    border-width: 0 0 0 0.5em
    border-style: solid
    border-color: $fg-border

  table
    width: 100%

    th
      color: $fg-table-head
    td
      color: $fg-table-data

    td.date
      width: 1%
      white-space: nowrap
      padding: 0 0.5em 0 0

  input#search-box
    background: $bg-search
    color: $fg-search
    font-family: $common-font
    font-size: initial
    border: none
    border-radius: $body-border-radius
    text-align: center
    width: 100%
    padding: 0.35em 1em
    box-sizing: border-box
    outline: none

  table#blog-index
    tr:hover
      background: $term-00

    td.title a
      display: flex
      width: 100%
      height: 100%
      align-items: center
      min-height: 2em

    td.tag
      display: none
      width: 1em
      text-align: right

      a
        color: $term-11

  table#latest-commits
    tr:hover
      background: $term-00

    td a
      display: flex
      width: 100%
      height: 100%
      align-items: center

    td.hash
      display: none
      width: 1em
      text-align: right

      a
        color: $term-11

  table.compare-table
    border-collapse: collapse

    th, td
      padding: 0.5em 1em
      box-sizing: border-box

    th:first-child, td:first-child
      padding-left: 0
    th:last-child, td:last-child
      padding-right: 0

    th, td:nth-child(n+2)
      text-align: center

    td
      border-top: 0.1em solid $fg-border

    th:nth-child(n+2)
      min-width: 4em

  li::marker
    color: $fg-list-bullet

  figure
    margin: 1.25em 0
    text-align: center

    img
      min-height: 5em
      max-height: 15em
      width: 100%
      object-fit: cover
      border-radius: $img-border-radius

    figcaption p
        margin-top: 0

  code
    font-family: $mono-font
    font-size: $code-font-size

  pre
    background: $bg-codeblock
    border-radius: 0.5em
    padding: 0.5em 1em
    overflow-x: auto
    line-height: initial

  & > hr
    color: $fg-border
    opacity: 0.5
    margin: 2em 0

  p code, li code
    background: $bg-codeblock
    padding: 0 0.3em
    border-radius: 0.25em

  & > p a, & > ul li a, & > ol li a
    text-decoration: underline

  ul#notebooks
    list-style-type: square
    padding-left: 1em

    ul.notes
      list-style-type: disc
      padding-left: 1.5em

  ul.terms-by-count
    display: grid
    grid-template-columns: repeat(auto-fit, minmax(11em, 1fr))
    list-style-type: none
    padding-left: 0
    text-align: center

  &.extra-pages h2 ~ p
    margin-left: 2em

  section.dialog
    display: flex
    padding: 1em
    align-content: center
    border-radius: $toc-border-radius

    border-width: 0.2em
    border-style: solid
    border-color: $fg-border

    margin: 0.5em 0 0 0

    box-sizing: border-box
    max-width: 100%

    p:first-child
      margin-top: 0
    p:last-child
      margin-bottom: 0

    .dialog-icon
      margin-right: 1em

    &.dialog-info
      border-color: $bg-dialog-info
    &.dialog-warning
      border-color: $bg-dialog-warning
    &.dialog-error
      border-color: $bg-dialog-error
    &.dialog-success
      border-color: $bg-dialog-success

    &.dialog-info, &.dialog-success
      strong, em
        color: inherit
      em
        font-style: italic

  section.microblog

    p.timestamp
      color: $fg-header-sub
      font-weight: bold
      font-size: 90%
      margin: 1em 0

    section.microblog-content
      margin-left: 1em

@media screen and (min-width: $body-max-width)
  article table#blog-index td.tag
    display: table-cell

  article table#latest-commits td.hash
    display: table-cell

  article section.dialog
    margin: 1em 0 0 0

  article section.microblog
    margin-left: 1em

section.github-card
  display: inline-block
  max-width: 20em
  min-width: 15em

  border-radius: 0.3em
  border: 0.1em solid $fg-border
  padding: 0.5em

  p, a
    margin: 0

  hr
    opacity: 0.5
    color: $fg-border

  section#description,
  section#more
    line-height: 1em

  section#header
    display: flex
    justify-content: space-between
    height: 3em

    img
      display: inline-block
      height: 3em
      border-radius: 0.3em

    section#title
      flex-grow: 1
      padding: 0.2em 0.5em

    section#stats
      display: flex
      align-items: center
      justify-content: flex-end
      min-width: 2em
      height: 1.5em

      svg
        fill: $fg-normal
        height: 1em
      p.github-star
        display: inline-block
        font-size: 90%
        padding-left: 0.3em

  section#description
    height: 3em
    text-overflow: ellipsis
    overflow: hidden
    padding: 0.5em 0 0

    p
      font-size: 90%

  section#more
    min-height: 1em

  section#more p.language
      display: inline-block
      margin: 0 0.2em
      border-radius: 1em
      padding: 0 0.35em
      background: $fg-normal
      color: $bg-normal
      font-size: 90%
